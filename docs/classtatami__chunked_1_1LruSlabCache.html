<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tatami_chunked: tatami_chunked::LruSlabCache&lt; Id_, Slab_ &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tatami_chunked
   </div>
   <div id="projectbrief">Helpers to create custom chunked tatami matrices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetatami__chunked.html">tatami_chunked</a></li><li class="navelem"><a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtatami__chunked_1_1LruSlabCache-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">tatami_chunked::LruSlabCache&lt; Id_, Slab_ &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Least-recently-used cache for slabs.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LruSlabCache_8hpp_source.html">LruSlabCache.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af977c86d2777dc7e4596d21a58fee697" id="r_af977c86d2777dc7e4596d21a58fee697"><td class="memTemplParams" colspan="2">template&lt;typename MaxSlabs_ &gt; </td></tr>
<tr class="memitem:af977c86d2777dc7e4596d21a58fee697"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#af977c86d2777dc7e4596d21a58fee697">LruSlabCache</a> (MaxSlabs_ max_slabs)</td></tr>
<tr class="separator:af977c86d2777dc7e4596d21a58fee697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ebee4dd4514b76fa56dd21e3a2d5a5" id="r_a11ebee4dd4514b76fa56dd21e3a2d5a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11ebee4dd4514b76fa56dd21e3a2d5a5">LruSlabCache</a> (const <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a> &amp;)=delete</td></tr>
<tr class="separator:a11ebee4dd4514b76fa56dd21e3a2d5a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eab8e76919ca8873fd4a5a5a816a1b2" id="r_a6eab8e76919ca8873fd4a5a5a816a1b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6eab8e76919ca8873fd4a5a5a816a1b2">operator=</a> (const <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a> &amp;)=delete</td></tr>
<tr class="separator:a6eab8e76919ca8873fd4a5a5a816a1b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022825f5749bba03b112fbe72d98ddd5" id="r_a022825f5749bba03b112fbe72d98ddd5"><td class="memTemplParams" colspan="2">template&lt;class Cfunction_ , class Pfunction_ &gt; </td></tr>
<tr class="memitem:a022825f5749bba03b112fbe72d98ddd5"><td class="memTemplItemLeft" align="right" valign="top">const Slab_ &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a022825f5749bba03b112fbe72d98ddd5">find</a> (Id_ id, Cfunction_ create, Pfunction_ populate)</td></tr>
<tr class="separator:a022825f5749bba03b112fbe72d98ddd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d5ce098dc015bee4d18209c08dc106" id="r_ac8d5ce098dc015bee4d18209c08dc106"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8d5ce098dc015bee4d18209c08dc106">get_max_slabs</a> () const</td></tr>
<tr class="separator:ac8d5ce098dc015bee4d18209c08dc106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdcdc9b90adc6db03cc7c82e5045b98" id="r_a1bdcdc9b90adc6db03cc7c82e5045b98"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bdcdc9b90adc6db03cc7c82e5045b98">get_num_slabs</a> () const</td></tr>
<tr class="separator:a1bdcdc9b90adc6db03cc7c82e5045b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename Id_, class Slab_&gt;<br />
class tatami_chunked::LruSlabCache&lt; Id_, Slab_ &gt;</div><p>Least-recently-used cache for slabs. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Id_</td><td>Type of cache identifier, typically integer. </td></tr>
    <tr><td class="paramname">Slab_</td><td>Class for a single slab.</td></tr>
  </table>
  </dd>
</dl>
<p>Implements a least-recently-used (LRU) cache, typically containing one or more "slabs" from a chunked matrix representation. Each slab is defined as the set of chunks required to read an element of the target dimension (or a contiguous block/indexed subset thereof) from a <code><a class="elRef" href="https://tatami-inc.github.io/tatami/classtatami_1_1Matrix.html">tatami::Matrix</a></code>. The LRU cache can be used for chunked <code><a class="elRef" href="https://tatami-inc.github.io/tatami/classtatami_1_1Matrix.html">tatami::Matrix</a></code> representations where the data is costly to load (e.g., from file) and no oracle is provided to predict future accesses on the target dimension. In such cases, chunks of data can be loaded and cached such that any possible future request for an already-loaded slab will just fetch it from cache. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af977c86d2777dc7e4596d21a58fee697" name="af977c86d2777dc7e4596d21a58fee697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af977c86d2777dc7e4596d21a58fee697">&#9670;&#160;</a></span>LruSlabCache() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<div class="memtemplate">
template&lt;typename MaxSlabs_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::LruSlabCache </td>
          <td>(</td>
          <td class="paramtype">MaxSlabs_</td>          <td class="paramname"><span class="paramname"><em>max_slabs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MaxSlabs_</td><td>Integer type of the maximum number of slabs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_slabs</td><td>Maximum number of slabs to store in the cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11ebee4dd4514b76fa56dd21e3a2d5a5" name="a11ebee4dd4514b76fa56dd21e3a2d5a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ebee4dd4514b76fa56dd21e3a2d5a5">&#9670;&#160;</a></span>LruSlabCache() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::LruSlabCache </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a>&lt; Id_, Slab_ &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deleted as the cache holds persistent iterators. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6eab8e76919ca8873fd4a5a5a816a1b2" name="a6eab8e76919ca8873fd4a5a5a816a1b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eab8e76919ca8873fd4a5a5a816a1b2">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a> &amp; <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">LruSlabCache</a>&lt; Id_, Slab_ &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deleted as the cache holds persistent iterators. </p>

</div>
</div>
<a id="a022825f5749bba03b112fbe72d98ddd5" name="a022825f5749bba03b112fbe72d98ddd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022825f5749bba03b112fbe72d98ddd5">&#9670;&#160;</a></span>find()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<div class="memtemplate">
template&lt;class Cfunction_ , class Pfunction_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Slab_ &amp; <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::find </td>
          <td>(</td>
          <td class="paramtype">Id_</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Cfunction_</td>          <td class="paramname"><span class="paramname"><em>create</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Pfunction_</td>          <td class="paramname"><span class="paramname"><em>populate</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method should only be called if <code>m &gt; 0</code> in the constructor.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Cfunction_</td><td>Function to create a new <code>Slab_</code> object. </td></tr>
    <tr><td class="paramname">Pfunction_</td><td>Function to populate a <code>Slab_</code> object with the contents of a slab.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Identifier for the cached slab. This is typically defined as the index of the slab on the target dimension. For example, if each chunk takes up 10 rows, attempting to access row 21 would require retrieval of slab 2. </td></tr>
    <tr><td class="paramname">create</td><td>Function that accepts no arguments and returns a <code>Slab_</code> object. </td></tr>
    <tr><td class="paramname">populate</td><td>Function that accepts a slab ID and a reference to a <code>Slab_</code> object, and populates the latter with the contents of the former.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to a slab. If the slab already exists in the cache, it is returned directly. If the slab does not exist and there is still space in the cache, a new slab is created and populated with the contents of slab <code>id</code>. If the slab does not exist and there is no space in the cache, the least recently used slab is evicted and its <code>Slab_</code> is populated with the contents of slab <code>id</code>. </dd></dl>

</div>
</div>
<a id="ac8d5ce098dc015bee4d18209c08dc106" name="ac8d5ce098dc015bee4d18209c08dc106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8d5ce098dc015bee4d18209c08dc106">&#9670;&#160;</a></span>get_max_slabs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::get_max_slabs </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Maximum number of slabs in the cache. The type is an unsigned integer defined in <code>std::list::size_type</code>. </dd></dl>

</div>
</div>
<a id="a1bdcdc9b90adc6db03cc7c82e5045b98" name="a1bdcdc9b90adc6db03cc7c82e5045b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bdcdc9b90adc6db03cc7c82e5045b98">&#9670;&#160;</a></span>get_num_slabs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Id_ , class Slab_ &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classtatami__chunked_1_1LruSlabCache.html">tatami_chunked::LruSlabCache</a>&lt; Id_, Slab_ &gt;::get_num_slabs </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Number of slabs currently in the cache. The type is an unsigned integer defined in <code>std::list::size_type</code>. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>tatami_chunked/<a class="el" href="LruSlabCache_8hpp_source.html">LruSlabCache.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
